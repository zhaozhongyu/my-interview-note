<html><head></head>
<body>

<div><!--StartFragment--><pre style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 0px; margin-top: 0px; overflow-wrap: normal; background-color: rgb(246, 248, 250); border-radius: 3px; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; color: rgb(36, 41, 46); font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">const</span> <span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">CDP</span> <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">=</span> <span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">require</span>(<span class="pl-s" style="box-sizing: border-box; color: rgb(3, 47, 98);"><span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span>chrome-remote-interface<span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span></span>);

<span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">async</span> <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">function</span> <span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">example</span>() {
    <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">let</span> client;
    <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">try</span> {
        <span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);"><span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);">//</span> connect to endpoint</span>
        client <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">=</span> <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">await</span> <span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">CDP</span>({host: 'localhost', port: 4096, local: true});
        <span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);"><span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);">//</span> extract domains</span>
        <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">const</span> {<span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">Network</span>, <span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">Page</span>} <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">=</span> client;
        <span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);"><span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);">//</span> setup handlers</span>
        <span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">Network</span>.<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">requestWillBeSent</span>((<span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">params</span>) <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">=&gt;</span> {
            <span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">console</span>.<span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">log</span>(<span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">params</span>.<span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">request</span>.<span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">url</span>);
        });
        <span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);"><span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);">//</span> enable events then start!</span>
        <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">await</span> <span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">Network</span>.<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">enable</span>();
        <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">await</span> <span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">Page</span>.<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">enable</span>();
        <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">await</span> <span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">Page</span>.<span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">navigate</span>({url<span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">:</span> <span class="pl-s" style="box-sizing: border-box; color: rgb(3, 47, 98);"><span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span>https://github.com<span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span></span>});
        <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">await</span> <span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">Page</span>.<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">loadEventFired</span>();
    } <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">catch</span> (err) {
        <span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">console</span>.<span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">error</span>(err);
    } <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">finally</span> {
        <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">if</span> (client) {
            <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">await</span> <span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">client</span>.<span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">close</span>();
        }
    }
}

<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">example</span>();</pre><!--EndFragment--></div><div><br></div><div>https://chromedevtools.github.io/devtools-protocol/tot/Animation</div><div><br></div><div>1. 切换Tab时</div><div>CDP.List({host: 'localhost', port: 4096, local: true}, function(err, tabs){console.log(tabs)})</div><div><div>CDP({host: 'localhost', port: 4096, local: true, id: 'bf70da13-1110-4099-8ebc-63b22f32270b'}).then((client)=&gt; {global.client = client} )</div></div><div><br></div><div><br></div></body></html>