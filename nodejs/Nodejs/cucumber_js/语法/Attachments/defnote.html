<html><head></head>
<body><!--StartFragment--><h1 style="box-sizing: border-box; font-size: 2em; margin-top: 0px !important; margin-right: 0px; margin-bottom: 16px; margin-left: 0px; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">Attachments</h1><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">Cucumber框架允许通过atach方法向this对象添加附件, 以保障某些文件或者变量的正确返回或保存</p><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><br></p><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">Text, images and other data can be added to the output of the event protocol and JSON formatters with attachments. The world constructor is passed an<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px;">attach</code><span>&nbsp;</span>function, which the default world constructor assigns to<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px;">this.attach</code>. If using a custom world constructor, you need to do this as well if you want to add attachments.</p><div class="highlight highlight-source-js" style="box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><pre style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-top: 0px; margin-bottom: 0px; word-wrap: normal; padding: 16px; overflow: auto; line-height: 1.45; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal;"><span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">var</span> {After} <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">=</span> <span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">require</span>(<span class="pl-s" style="box-sizing: border-box; color: rgb(3, 47, 98);"><span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span>cucumber<span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span></span>);

<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">After</span>(<span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">function</span> () {
  <span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">this</span>.<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">attach</span>(<span class="pl-s" style="box-sizing: border-box; color: rgb(3, 47, 98);"><span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span>Some text<span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span></span>);
});</pre></div><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">By default, text is saved with a MIME type of<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px;">text/plain</code>. You can also specify a different MIME type:</p><div class="highlight highlight-source-js" style="box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><pre style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-top: 0px; margin-bottom: 0px; word-wrap: normal; padding: 16px; overflow: auto; line-height: 1.45; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal;"><span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">var</span> {After} <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">=</span> <span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">require</span>(<span class="pl-s" style="box-sizing: border-box; color: rgb(3, 47, 98);"><span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span>cucumber<span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span></span>);

<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">After</span>(<span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">function</span> () {
  <span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">this</span>.<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">attach</span>(<span class="pl-s" style="box-sizing: border-box; color: rgb(3, 47, 98);"><span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span>{"name": "some JSON"}<span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span></span>, <span class="pl-s" style="box-sizing: border-box; color: rgb(3, 47, 98);"><span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span>application/json<span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span></span>);
});</pre></div><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">Images and other binary data can be attached using a<span>&nbsp;</span><a href="https://nodejs.org/api/stream.html" rel="nofollow" style="box-sizing: border-box; background-color: transparent; color: rgb(3, 102, 214); text-decoration: none;">stream.Readable</a>. The data will be<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px;">base64</code><span>&nbsp;</span>encoded in the output. You should wait for the stream to be read before continuing by providing a callback or waiting for the returned promise to resolve.</p><div class="highlight highlight-source-js" style="box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><pre style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-top: 0px; margin-bottom: 0px; word-wrap: normal; padding: 16px; overflow: auto; line-height: 1.45; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal;"><span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">var</span> {After, Status} <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">=</span> <span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">require</span>(<span class="pl-s" style="box-sizing: border-box; color: rgb(3, 47, 98);"><span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span>cucumber<span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span></span>);

<span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);"><span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);">//</span> Passing a callback</span>
<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">After</span>(<span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">function</span> (<span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">testCase</span>, <span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">callback</span>) {
  <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">if</span> (<span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">testCase</span>.<span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">result</span>.<span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">status</span> <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">===</span> <span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">Status</span>.<span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">FAILED</span>) {
    <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">var</span> stream <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">=</span> <span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">getScreenshotOfError</span>();
    <span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">this</span>.<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">attach</span>(stream, <span class="pl-s" style="box-sizing: border-box; color: rgb(3, 47, 98);"><span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span>image/png<span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span></span>, callback);
  }
  <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">else</span> {
    <span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">callback</span>();
  }
});

<span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);"><span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);">//</span> Returning the promise</span>
<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">After</span>(<span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">function</span> (<span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">testCase</span>) {
  <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">if</span> (<span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">testCase</span>.<span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">result</span>.<span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">status</span> <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">===</span> <span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">Status</span>.<span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">FAILED</span>) {
    <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">var</span> stream <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">=</span> <span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">getScreenshotOfError</span>();
    <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">return</span> <span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">this</span>.<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">attach</span>(stream, <span class="pl-s" style="box-sizing: border-box; color: rgb(3, 47, 98);"><span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span>image/png<span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span></span>);
  }
});</pre></div><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">Images and binary data can also be attached using a<span>&nbsp;</span><a href="https://nodejs.org/api/buffer.html" rel="nofollow" style="box-sizing: border-box; background-color: transparent; color: rgb(3, 102, 214); text-decoration: none;">Buffer</a>. The data will be<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px;">base64</code><span>&nbsp;</span>encoded in the output.</p><div class="highlight highlight-source-js" style="box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><pre style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-top: 0px; margin-bottom: 0px; word-wrap: normal; padding: 16px; overflow: auto; line-height: 1.45; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal;"><span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">var</span> {After, Status} <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">=</span> <span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">require</span>(<span class="pl-s" style="box-sizing: border-box; color: rgb(3, 47, 98);"><span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span>cucumber<span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span></span>);

<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">After</span>(<span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">function</span> (<span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">testCase</span>) {
  <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">if</span> (<span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">testCase</span>.<span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">result</span>.<span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">status</span> <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">===</span> <span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">Status</span>.<span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">FAILED</span>) {
    <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">var</span> buffer <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">=</span> <span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">getScreenshotOfError</span>();
    <span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">this</span>.<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">attach</span>(buffer, <span class="pl-s" style="box-sizing: border-box; color: rgb(3, 47, 98);"><span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span>image/png<span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span></span>);
  }
});</pre></div><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">Here is an example of saving a screenshot using<span>&nbsp;</span><a href="https://www.npmjs.com/package/selenium-webdriver" rel="nofollow" style="box-sizing: border-box; background-color: transparent; color: rgb(3, 102, 214); text-decoration: none;">Selenium WebDriver</a><span>&nbsp;</span>when a scenario fails:</p><div class="highlight highlight-source-js" style="box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><pre style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-top: 0px; margin-bottom: 0px; word-wrap: normal; padding: 16px; overflow: auto; line-height: 1.45; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal;"><span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">var</span> {After, Status} <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">=</span> <span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">require</span>(<span class="pl-s" style="box-sizing: border-box; color: rgb(3, 47, 98);"><span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span>cucumber<span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span></span>);

<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">After</span>(<span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">function</span> (<span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">testCase</span>) {
  <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">var</span> world <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">=</span> <span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">this</span>;
  <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">if</span> (<span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">testCase</span>.<span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">result</span>.<span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">status</span> <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">===</span> <span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">Status</span>.<span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">FAILED</span>) {
    <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">return</span> <span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">webDriver</span>.<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">takeScreenshot</span>().<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">then</span>(<span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">function</span>(<span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">screenShot</span>) {
      <span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);"><span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);">//</span> screenShot is a base-64 encoded PNG</span>
      <span class="pl-smi" style="box-sizing: border-box; color: rgb(36, 41, 46);">world</span>.<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">attach</span>(screenShot, <span class="pl-s" style="box-sizing: border-box; color: rgb(3, 47, 98);"><span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span>image/png<span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span></span>);
    });
  }
});</pre></div><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;">Attachments are also printed by the progress, progress-bar and summary formatters. They appear right after the step and only<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px;">text/plain</code><span>&nbsp;</span>content is visible. It can be used to debug scenarios, especially in parallel mode.</p><div class="highlight highlight-source-js" style="box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><pre style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-top: 0px; margin-bottom: 0px; word-wrap: normal; padding: 16px; overflow: auto; line-height: 1.45; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal;"><span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);"><span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);">//</span> Step definition</span>
<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">Given</span>(<span class="pl-sr" style="box-sizing: border-box; color: rgb(3, 47, 98);"><span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">/</span><span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">^</span>a basic step<span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">$</span><span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">/</span></span>, <span class="pl-k" style="box-sizing: border-box; color: rgb(215, 58, 73);">function</span>() {
  <span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">this</span>.<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">attach</span>(<span class="pl-s" style="box-sizing: border-box; color: rgb(3, 47, 98);"><span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span>Some info.<span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span></span>)
  <span class="pl-c1" style="box-sizing: border-box; color: rgb(0, 92, 197);">this</span>.<span class="pl-en" style="box-sizing: border-box; color: rgb(111, 66, 193);">attach</span>(<span class="pl-s" style="box-sizing: border-box; color: rgb(3, 47, 98);"><span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span>{"some", "JSON"}}<span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span></span>, <span class="pl-s" style="box-sizing: border-box; color: rgb(3, 47, 98);"><span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span>application/json<span class="pl-pds" style="box-sizing: border-box; color: rgb(3, 47, 98);">'</span></span>)
})

<span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);"><span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);">//</span> Result format</span>
<span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);"><span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);">//</span> ✔ Given a basic step # path:line</span>
<span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);"><span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);">//</span>    Attachment (text/plain): Some info.</span>
<span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);"><span class="pl-c" style="box-sizing: border-box; color: rgb(106, 115, 125);">//</span>    Attachment (application/json)</span></pre></div><!--EndFragment-->

</body></html>