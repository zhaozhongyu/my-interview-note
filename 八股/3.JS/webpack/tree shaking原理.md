## treeShaking机制的原理


treeShaking 也叫摇树优化，是一种通过移除多于代码，来优化打包体积的，生产环境默认开启。

可以在代码不运行的状态下，分析出不需要的代码；

**利用es6模块的规范是静态进入的特性.**

而ES5的require是动态引入, 这个特性可以通过判断条件解决按需记载的优化问题, 但是CommonJS规范无法确定在实际运行前需要或者不需要某些模块，所以CommonJS不适合tree-shaking机制。

利用ES6的特性:
* 只能作为模块顶层的语句出现
* import的模块名只能是字符串常量
* import binding 是 immutable的，引入的模块不能再进行修改

实现原理可以简单的概况：

**ES6 Module引入进行静态分析，故而编译的时候可以正确判断到底加载了那些模块.**

静态分析程序流，判断那些模块和变量未被使用或者引用，进而删除对应代码.

  
如果想要做到tree shaking，在引入模块时就应该避免全部引入，应该引入局部才可以触发tree shaking机制